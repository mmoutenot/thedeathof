<html>
  <head>
    <script>

      function ekg() {
        var ctx = demo.getContext('2d'),
        w = demo.width,
        h = demo.height,
        px = 0, opx = 0, speed = 3,
        py = h * 0.8, opy = py,
        scanBarWidth = 20;
        ctx.canvas.width  = window.innerWidth;
        ctx.canvas.height = window.innerHeight;

        ctx.strokeStyle = '#00bd00';
        ctx.lineWidth = 3;

        demo.onmousemove = function(e) {
          var r = demo.getBoundingClientRect();
          py = e.clientY - r.top;
        }

        loop();

        function loop() {
          px += speed;

          ctx.clearRect(px,0, scanBarWidth, ctx.canvas.height);
          ctx.beginPath();
          ctx.moveTo(opx, opy);
          ctx.lineTo(px, py);
          ctx.stroke();

          opx = px;
          opy = py;

          if (opx > ctx.canvas.width) {
            px = opx = -speed;
          }

          requestAnimationFrame(loop);
        }
      }
    </script>
    <style>
      html, body {
        width:  100%;
        height: 100%;
        margin: 0px;
      }

      canvas {
        background:#000;
      }
    </style>
  </head>
  <body onload="ekg()">
    <canvas id="demo"></canvas>
  </body>
</html>

